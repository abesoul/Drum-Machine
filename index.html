<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Space Drum Machine</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
</head>
<body>
  <script>
    // Redirect to login if not logged in
    if (!localStorage.getItem("loggedInUser")) {
      window.location.href = "login.html";
    }
  </script>

  <header id="auth-bar">
    <span>🧑‍🚀 Welcome, <span id="user-name"></span></span>
    <button onclick="logout()">Logout</button>
  </header>

  <main class="app-container">
    <h1 class="title">🚀 Space Drum Machine 🔊</h1>

    <section class="upload-controls">
      <input type="file" id="file-upload">
      <input type="text" id="assign-key" placeholder="Assign to key (A-Z)">
      <button id="save-project-btn">💾 Save</button>
      <button id="download-project-btn">⬇️ Download</button>
    </section>

    <section id="display">
      <h2 id="display-text">Tap a Pad or Press a Key</h2>
    </section>

    <div class="pad-grid">
  <div class="drum-pad" data-key="Q">Q</div>
  <div class="drum-pad" data-key="W">W</div>
  <div class="drum-pad" data-key="E">E</div>
  <div class="drum-pad" data-key="A">A</div>
  <div class="drum-pad" data-key="S">S</div>
  <div class="drum-pad" data-key="D">D</div>
  <div class="drum-pad" data-key="Z">Z</div>
  <div class="drum-pad" data-key="X">X</div>
  <div class="drum-pad" data-key="C">C</div>
</div>


    <div class="loop-toggle">
      <label for="loop-toggle-checkbox">
        <input type="checkbox" id="loop-toggle-checkbox" />
        Loop Mode
      </label>
    </div>

    <!-- Tabs -->
    <nav class="tabs">
      <button class="tab-btn" onclick="showTab('sequencer')">🎛️ Sequencer</button>
      <button class="tab-btn" onclick="showTab('pads')">🥁 Pads</button>
      <button class="tab-btn" onclick="showTab('fx')">🎚️ FX</button>
      <button class="tab-btn" onclick="showTab('library')">🎵 Library</button>
      <button class="tab-btn" onclick="showTab('challenges')">🔥 Challenges</button>
      <button class="tab-btn" onclick="showTab('settings')">⚙️ Settings</button>
    </nav>

    <!-- Tab Contents -->
    <section id="sequencer" class="tab-content">
      <h2>Step Sequencer</h2>
      <div class="sequencer-controls">
    <button onclick="addTrack()" class="alien-btn">➕ Add Track</button>
    <button onclick="playSequence()" class="alien-btn">▶️ Play</button>
    <button onclick="stopSequence()" class="alien-btn">⏹️ Stop</button>
    <button onclick="clearSequencer()" class="alien-btn danger">🧼 Clear</button>
  </div>

      <div id="sequencer-grid" class="sequencer-grid">
  <!-- Dynamically created grid -->
</div>
</div>
    </section>

    <section id="fx" class="tab-content">
      <h2>Effects Rack</h2>
      <div class="effects">
        <label>Delay: <input type="range" id="delay" min="0" max="1" step="0.01" /></label>
        <label>Filter: <input type="range" id="filter" min="0" max="1" step="0.01" /></label>
        <label>Bitcrusher: <input type="range" id="bitcrusher" min="0" max="1" step="0.01" /></label>
      </div>

      <div id="trimmer-controls">
        <label>Start Time: <input type="range" id="start-time" min="0" max="30" step="0.1" /></label>
        <label>End Time: <input type="range" id="end-time" min="0" max="30" step="0.1" /></label>
      </div>

      <div id="reverb-controls">
        <label>Mix: <input type="range" id="reverb-mix" min="0" max="1" step="0.01" /></label>
        <label>Decay: <input type="range" id="reverb-decay" min="0.1" max="10" step="0.1" /></label>
        <label>Size: <input type="range" id="reverb-size" min="0.1" max="10" step="0.1" /></label>
      </div>
    </section>

    <section id="library" class="tab-content">
      <h2>Sample Library</h2>
      <input type="file" id="upload-sample" accept="audio/*" />
      <select id="assign-sample-key">
        <option value="">Assign to Key</option>
        <option value="Q">Q</option>
        <option value="W">W</option>
        <option value="E">E</option>
        <option value="A">A</option>
        <option value="S">S</option>
        <option value="D">D</option>
        <option value="Z">Z</option>
        <option value="X">X</option>
        <option value="C">C</option>
      </select>
    </section>

    <section id="challenges" class="tab-content">
      <h2>Beat Challenges</h2>
      <div class="challenge">
        <p>Challenge 1: Make a 4-pad loop!</p>
        <button onclick="startChallenge()">Start</button>
      </div>
    </section>

    <section id="settings" class="tab-content">
      <h2>Settings</h2>
      <label>
        Dark Mode:
        <input type="checkbox" id="theme-toggle" onclick="toggleTheme()" />
      </label>
      <div class="project-controls">
        <button onclick="saveProject()">💾 Save</button>
        <button onclick="loadProject()">📂 Load</button>
      </div>
      <canvas id="waveform" width="800" height="100"></canvas>
    </section>

  </main>

  <script src="script.js"></script>
</body>
</html>
